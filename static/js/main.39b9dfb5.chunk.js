(this["webpackJsonptypescript-quizz-app"]=this["webpackJsonptypescript-quizz-app"]||[]).push([[0],{18:function(e,t,n){e.exports=n(42)},40:function(e,t,n){},41:function(e,t,n){},42:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),c=n(17),o=n.n(c),i=n(7),u=n(2),l=n(5),s=n.n(l),m=Object(a.createContext)(null),d=function(e){var t=e.flashcard,n=Object(a.useState)(!1),c=Object(u.a)(n,2),o=c[0],i=c[1],l=Object(a.useState)(0),s=Object(u.a)(l,2),d=s[0],f=s[1],p=Object(a.useContext)(m).handleAnswer,b=Object(a.useRef)(null),v=Object(a.useRef)(null),E=Object(a.useRef)(document.createElement("div")),h=function(){var e,t,n=(null===(e=b.current)||void 0===e?void 0:e.getBoundingClientRect().height)||0,a=(null===(t=b.current)||void 0===t?void 0:t.getBoundingClientRect().height)||0;f(Math.max(n,a,100))};Object(a.useEffect)((function(){var e=setTimeout((function(){h()}),1500);return function(){return clearTimeout(e)}}),[]),Object(a.useEffect)((function(){return window.addEventListener("resize",h),function(){return window.removeEventListener("resize",h)}}),[]);return r.a.createElement("div",{className:"card ".concat(o?"flip":""),style:{height:"".concat("".concat(d>100?d:100,"px"))},onClick:function(){return i(!o)},ref:E},r.a.createElement("div",{className:"front",ref:b},r.a.createElement("div",{className:"question-title"},r.a.createElement("h4",null,t.question)),r.a.createElement("div",{className:"options"},t.options.map((function(e,n){return r.a.createElement("button",{"data-value":e,className:"option",key:n,onClick:function(e){return n=e,i(!o),n.currentTarget.getAttribute("data-value")===t.answer?(E.current.style.backgroundColor="green",p(!0,t.id)):(E.current.style.backgroundColor="red",p(!1,t.id)),void setTimeout((function(){E.current.style.backgroundColor="grey"}),1e3);var n}},e)})))),r.a.createElement("div",{className:"back",ref:v},t.answer))},f=(n(40),function(){return r.a.createElement("span",{className:"spinner"})}),p=n(6),b={hidden:{opacity:1,scale:0},visible:{opacity:1,scale:1,transition:{delay:.3,when:"beforeChildren",staggerChildren:.1}}},v={hidden:{opacity:0},visible:{opacity:1}},E=function(e){var t=e.flashcards;return r.a.createElement("div",null,t&&t.length?r.a.createElement(p.a.ul,{initial:"hidden",animate:"visible",variants:b},r.a.createElement("div",{className:"card-grid"},t.map((function(e){return r.a.createElement(p.a.div,{variants:v,key:e.id},r.a.createElement(d,{flashcard:e}))})))):r.a.createElement("div",{className:"card-grid"},[1,2,3,4].map((function(e,t){return r.a.createElement(p.a.div,{key:t,variants:v,className:"card"},r.a.createElement(f,null))}))))},h=function(e){var t=document.createElement("textarea");return t.innerHTML=e,t.value},g=(n(41),function(){var e=Object(a.useState)([]),t=Object(u.a)(e,2),n=t[0],c=t[1],o=Object(a.useState)(),l=Object(u.a)(o,2),d=l[0],f=l[1],p=Object(a.useState)(!0),b=Object(u.a)(p,2),v=b[0],g=b[1],j=Object(a.useState)([]),O=Object(u.a)(j,2),y=O[0],w=O[1],N=Object(a.useRef)(null),S=Object(a.useRef)(null),k=Object(a.useState)(0),C=Object(u.a)(k,2),q=C[0],R=C[1],x=Object(a.useState)(new Set),z=Object(u.a)(x,2),_=z[0],L=z[1];Object(a.useEffect)((function(){s.a.get("https://opentdb.com/api_category.php").then((function(e){w(e.data.trivia_categories),g(!1)}))}),[]),Object(a.useEffect)((function(){s.a.get("https://opentdb.com/api.php?amount=10").then((function(e){c(e.data.results.map((function(e,t){var n=h(e.correct_answer),a=[].concat(Object(i.a)(e.incorrect_answers.map((function(e){return h(e)}))),[n]);return{id:"".concat(t,"-").concat(Date.now()),question:h(e.question),answer:h(n),options:a.sort((function(){return Math.random()-.5}))}})))})).catch((function(){return f("Sorry, the API is not responding right now, try again later.")}))}),[]);return r.a.createElement(r.a.Fragment,null,r.a.createElement("form",{className:"header",onSubmit:function(e){return function(e){var t,n;e.preventDefault(),s.a.get("https://opentdb.com/api.php?amount=10",{params:{amount:null===(t=S.current)||void 0===t?void 0:t.value,category:null===(n=N.current)||void 0===n?void 0:n.value}}).then((function(e){c(e.data.results.map((function(e,t){var n=h(e.correct_answer),a=[].concat(Object(i.a)(e.incorrect_answers.map((function(e){return h(e)}))),[n]);return{id:"".concat(t,"-").concat(Date.now()),question:h(e.question),answer:h(n),options:a.sort((function(){return Math.random()-.5}))}})))}))}(e)}},r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{htmlFor:"category"},"Category"),r.a.createElement("select",{name:"category",id:"category",ref:N},y.length?y.map((function(e){return r.a.createElement("option",{value:e.id,key:e.id},e.name)})):r.a.createElement("option",null,"Loading..."))),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{htmlFor:"amount"},"Number of Questions"),r.a.createElement("input",{disabled:v,type:"number",id:"amount",min:"1",step:"1",defaultValue:10,ref:S})),r.a.createElement("div",{className:"form-group"},r.a.createElement("button",{disabled:v,className:"btn ".concat(v?"disabled":""),type:"submit"},v?"Loading...":"Generate")),r.a.createElement("div",{className:"form-group"},r.a.createElement("h2",{className:"counter-msg"},"Score: ",q))),r.a.createElement("div",{className:"container"},d&&r.a.createElement("p",{className:"error-msg"},d),r.a.createElement(m.Provider,{value:{counter:q,handleAnswer:function(e,t){_.has(t)||(L(_.add(t)),R(e?function(e){return++e}:function(e){return--e}))}}},r.a.createElement(E,{flashcards:n}))))});o.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(g,null)),document.getElementById("root"))}},[[18,1,2]]]);
//# sourceMappingURL=main.39b9dfb5.chunk.js.map